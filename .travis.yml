language: java
dist: trusty
jdk:
  - oraclejdk8

sudo: false
install: true

notifications:
  email: false

branches:
  only:
  - master
  - development

deploy:
  - provider: script
    script: bash scripts/deploy.sh
    on:
      branch: master
  - provider: script
    script: bash scripts/deploy-snapshot.sh
    on:
      branch: development

env:
  global:
    - secure: "WnVDFZiOte83Oe6OTJT3Z7chYvYBlR/YkrtQo8HYddXa7SmfFi11Q9qnYy+0SGamQjD72gpz7+cCyNc2xiSUZGwuppwU4XaCgAKaw78RbfFyMxmv+q7Rmf8UgaCFXgUGAlkxnXgZcfAfLVGXu91HZOYOcYlXnMJBiWaDN9V7sHS9T/nTGRu/Jq+hKHWZD9S0zlsi8yQcpNg+N4G4pt0/QRtOg/qhsEAED4Cynammsx/aYXwhmP7Yt4o/cUH/ko/hjWhOAaY4h0CgNcrwUqziIdKKwqT0hHszlJb43oyy/gkUeHdRO+7Ozsn0ZrgoHM/Q1OLsiAdnW+XYVP9Pv5qdC4J97XODtGKVdZLMscXVsQQwcmbFKonUh43+EjsefWnnvVBglzJSx982dUJXdo08k8ejRwkywuG6h4el4UL5R2EcFoOg/xouA7O5LCQaJTNqaAs9TZ4ag+KeYZCoqaC56+4E6jKgrlmzwc4vmhFS8dnL8gatCL1JnERjZNKLkVJO3DY4AFDqhYEGrvRkmbMs7RW9hbTorvVSEHz3SCkNoOlgwEAt2GBnN9nRM0Zc3hAN5MYQxMkVrag+DCG0uovayXTLn+eYZVIP3JudfrJiw2WD3RODfLaIIhFp8raJj9KH4pxAluzfU/W7u4fUJibjQCEb/Bea4PJ4bclHnEKQx1U="
    # ^^ GITHUB_USERNAME
    - secure: "XeXD+hRjbxrGSWGCuWPvLd34mNrEFVVxF9JfJMUf22ms6rjgOUj524kg+cKCC7hr2J86eFdGMSc5+64t9MnEci5bOFn/yPcFidunCaOKVExrhUFwkljvqFZCeZyTMMZ0s1IMFoMOPzczP9d0Zc5SuTTy7SkZE2Cn292ubmIsntDrRhtk632G6F7+PRBCpI8WvLEmWrDFOHUfxzHBDtB7+RoMbKkNHJd/Y+091QxAJV2x7hD1ao3Ks9OS3ZPJsJg9ycKXPfYaWNjNWlOihWn39+Yzq+8danjQvkizsfPFFcLFkTI95tUfr3PIzSidrcy42caW/Q6WfBPamFMsLL6HzjzfN0eJNXSbDKYPKjhX/fPyQWlRrxIkGZQCTtdi96nAa/vHfPyQWFPuAOf9YoZySHilkvaLig3LFkoNDOo0cP093Sq/ETApJnzRnWsGBviiw7newKVgB1Y92omEBqqX1MN+moYFdXRG+ZUpin1sxf3w5qbZJycyDDRyKdLEqd7JWC7cJrAf3wBMGBKJMQCn6RXekybjpa657B7hMJHWJ1bxSsTQEUwhwP542eTuIfwZD3rJOEH5OSLatat0OeDZir7629ASuMOqquj6z5rVJ1Iqfd2CwuuImpPDR7y4MQZN6DGPdwDP953UO/lwOYZoItDz75oWajT2flpOXVYU0zw="
    # ^^ GITHUB_ACCESS_TOKEN
    - secure: "UDIFx/bnrvsagAbyH4jlHpAW5l4W3ZFDXmbZMjPSthM8gxFSNHjJmnpO0mI2YRvC2ra5K/B2S5CIXQ75hIFdXBDPXdzU8t00phcMwNTNw5VPYaexUhJ30wiTYb8KZtZZzhDpXJlgfG4rXljODHxLRPnzW4/II2/edCZgM7bOa4QDTUrAcReCxAlBWTpODAX7rmW/ScNWZ6aoJ58pc5/cbH8slUbINknPVddK/co2y5bHOMdAmzSMwjFwunHenda3wJSdAu91yVT2K4H0xCqEPD472lTl/R0gc3XiOCplPuWMaYI1DUONhAQMO1MLrNOdwn8LRqW0xDm622NfCZOk3E/2KwHN8UG98uS5iDnak44TiTvekwKzo0m/15ii0hu20Z38hnU8SieMpahcYZcDsqSSUOIK8C8ttVVI6bFx747L4EbMzLOY/qm3JCXBsNM9WKRI/CaRRALfrvoge+X+fscJTigWRNQMInLtz+3ab7wC1+XxWRAPIMDtuWiLpq6vmMtv0djF6dPjUp8/TgDkyWg0QvvjFxHxmUT++brXADVAaKnorRpUJcRKx0zVlF24/dqsnhByY7YGpSMEJ3zeSBMKA8VLSkDZDpKLjyYtG3n0AbjnMRMtn/x9WkhaoiqQOYzLoR7b8H9TdvDuQ7YRtc4e52EHgg/HyNjvvxTQFh8="
    # ^^ OSSRH_JIRA_USERNAME
    - secure: "RBuNBvFl7ab39RKj9fYHxBvKHMJpVqckBW46V++jJp+9OmHnSA0twFO6XHAsqYwOJqcYznHyhM/kh6aXPLFVmhw3fQ0lvZ9zjv/TGRGvNrkQiq3XWroOO+mDT+I38IzvbkPSzV3cWWWETRK2HITUTR4TIItsmeH9VS0LwVUSaQQaN7PrReiYcrwy2YzaTQQYqR0h6pi1DkC6LzjGeihvsdFFKJ+h0IKkMfcsn47FbnYKEFZWEp4fE5ehnpMpqgrpPm/HAiqs5esSbTO8SRdrcVQkLmBNmBfOCd3k9ce680+o0d0pkFjzxKonxe6meXLDnmHeAd9GPqXnx9M4qRxIsbrOSi3qoJTXg+ULIvlYjS9ZodqxERhy4vYSuf2enI/kC39uFyBD6JM1BhlOOu/NzDaRa5x6GXoEcqz1arjrz1XypUwJZNO7gmYSC6Jj6/1jEzTN2i0Bg2PBOb+3wqh13A1nCssDrW9VBt86Ugit9qmrwNMYEgeSpx9OKbE5WQw1jXS4ixYDGHrCBiEXov6ig232frzLXwSOtIODYJf9mZKfE+59uosuTcXqjpBvx9hiCPPM7xfHw8IeJ5rSe52lB0WLDFOr7SWEAFZBhRhOe2ifeu0h+LRggJkFvI9a1M0iUqLS1NU6/ciS0tOLl1pbicqOM9HesRv2ZgKmveBGQ9I="
    # ^^ OSSRH_JIRA_PASSWORD
    - secure: "An+d0D5+Ebn33e1ykc7SDTpTgtQ3P0DgwtNE2wycsLzthbKaJSHuX90wEgXTEGGNIzrdczt1SC0hdjG3gd5Ugncsdk3uPgbWSu6JoytcsG6oNTICgARnwbsSITzz0aSiiy1wO+FMmlVhzTcQWwpPaX5uZXLEJPmD5UoK/a4M8Xrw/6j2VscwLFS/E37tM+7OhKAJzrbV4z6c6b1PTQk4QYdW4s+7+5T4sBhnGUrHOnO0kJXhJREx1epJU64vECja8WpPfW5UkxmI0pfJ7juJ8GNLaKUTG2ssk8ltQuZUZfFSNnra4nncoTw1KBLwMxRc/gB0uNNc08H22g6tgm87UHVCJhalSF7MAtznwwDltC86lM+/vP6yO3lFIu9vBlDWi3bbdwc/EJHAZFEUteIxB2di3mo7Vss2sKHHcmt/IZIf5Jw02EM3OhItTrqucqSEm1lbg1kOdwGLNWDxkknSFcnAwRPELvW4CDJ6xNxoe0c6CEja1nQqoKnG3x6rfG3W1Ol8fVd1CT33dgPGmvK7tv2qIy++fW/SWLBkNUo/EdHwVmeeLuczZLgNxvaSdIkc//W4CYpNw6Y/gWJZ0GVp3Z9K25ye8Bvy9nvvqN1FFM+QjfwMYiIObS9TLfwNgXlwZk//I+A/WtKJazeAr5AsU6NHwFykbUFNlKvrHyfOQ9o="
    # ^^ GPG_KEY_NAME
    - secure: "hDmH7VHWXVXdD51UTZXfBx2Kwkng8CQqgdESlKJ1brk+UQa9n95D06v5bTp3coEI4YYpTAG7uxVUMJQHY6Yc0vWYjTshZQWQL8Xsp0xw8iUzxTrWDEW+KiFeCqjubGQKLI3z+QjcCdofV83r4YdrmG+bTPT7yiLDAo8ypQ1YfvCpxoJYhPCDD2bj4PzJZ1VZFTjYgY2OUoEzjCPwDj+5jy9Jaqeh//7VKomNLNq59SE8rLUCrVj8oh19JIwym1BJ57ezXVbEgp0gVaM8Z5mSMbZCQZueGAAdnC/glVqp/WJTo8NM2OfJGrRb/8FUDVuqpfIa6T71ERWcMc+hdcNATdZpZ2IjuodhVgVGmXyqeGcuSTq/R23R3yGHW+79fedJQZAyFSNTPjDf87vsySOILsrGRYUnGF+lH8XHtdmZuAe+I2jfyRuzaed2XRdHLBeGKHdFuv5dbGxwdMUBdlg9X4tGLJv/ku3mFhBZFn5UidlPgBjb01RCgNvSno58Yek8DCJ2wWBZ69WWt5egOYV7c3BhA0N8Yw9mM8wUCr6//sV3o90fLD/sMJ7c9MQ660i0Nlu8SgyRMBdyJMJ5t4642jaby5Wm02pYYoXavfrf0cKPyHPikxZ3HRhjcknoRXu9Rm7WxNmPmRutyKc1+j/1L0eW/b0jLSLZCjewXOJH7EQ="
    # ^^ GPG_PASSPHRASE

before_script:
  - git clone https://${GITHUB_USERNAME}:${GITHUB_ACCESS_TOKEN}@github.com/mirioeggmann/tbmelabs-deploy-certificates.git
  - gpg --fast-import tbmelabs-deploy-certificates/tbmelabs-deploy-key.asc
  - cp .travis.settings.xml $HOME/.m2/settings.xml

script:
  - mvn clean verify

after_script:
  - rm -rf tbmelabs-deploy-certificates

cache:
  directories:
    - "$HOME/.cache"
    - '$HOME/.m2/repository'
